\documentclass[letter-paper]{tufte-book}

%%
% Book metadata
\title{Riemannian geometry 4H}
\author[]{B. S. H. Mithrandir}
%\publisher{Research Institute of Valinor}

%%
% If they're installed, use Bergamo and Chantilly from www.fontsite.com.
% They're clones of Bembo and Gill Sans, respectively.
\IfFileExists{bergamo.sty}{\usepackage[osf]{bergamo}}{}% Bembo
\IfFileExists{chantill.sty}{\usepackage{chantill}}{}% Gill Sans

%\usepackage{microtype}
\usepackage{amssymb}
\usepackage{amsmath}
%%
% For nicely typeset tabular material
\usepackage{booktabs}

%% overunder braces
\usepackage{oubraces}

%% 
\usepackage{xcolor}
\usepackage{tcolorbox}

\newtcolorbox[auto counter,number within=section]{derivbox}[2][]{colback=TealBlue!5!white,colframe=TealBlue,title=Box \thetcbcounter:\ #2,#1}                                                          

\makeatletter
\@openrightfalse
\makeatother

%%
% For graphics / images
\usepackage{graphicx}
\setkeys{Gin}{width=\linewidth,totalheight=\textheight,keepaspectratio}
\graphicspath{{figs/}}

\usepackage{tikz-cd}

% The fancyvrb package lets us customize the formatting of verbatim
% environments.  We use a slightly smaller font.
\usepackage{fancyvrb}
\fvset{fontsize=\normalsize}

\usepackage[plain]{fancyref}
\newcommand*{\fancyrefboxlabelprefix}{box}
\fancyrefaddcaptions{english}{%
  \providecommand*{\frefboxname}{Box}%
  \providecommand*{\Frefboxname}{Box}%
}
\frefformat{plain}{\fancyrefboxlabelprefix}{\frefboxname\fancyrefdefaultspacing#1}
\Frefformat{plain}{\fancyrefboxlabelprefix}{\Frefboxname\fancyrefdefaultspacing#1}

%%
% Prints argument within hanging parentheses (i.e., parentheses that take
% up no horizontal space).  Useful in tabular environments.
\newcommand{\hangp}[1]{\makebox[0pt][r]{(}#1\makebox[0pt][l]{)}}

%% 
% Prints an asterisk that takes up no horizontal space.
% Useful in tabular environments.
\newcommand{\hangstar}{\makebox[0pt][l]{*}}

%%
% Prints a trailing space in a smart way.
\usepackage{xspace}
\usepackage{xstring}

%%
% Some shortcuts for Tufte's book titles.  The lowercase commands will
% produce the initials of the book title in italics.  The all-caps commands
% will print out the full title of the book in italics.
\newcommand{\vdqi}{\textit{VDQI}\xspace}
\newcommand{\ei}{\textit{EI}\xspace}
\newcommand{\ve}{\textit{VE}\xspace}
\newcommand{\be}{\textit{BE}\xspace}
\newcommand{\VDQI}{\textit{The Visual Display of Quantitative Information}\xspace}
\newcommand{\EI}{\textit{Envisioning Information}\xspace}
\newcommand{\VE}{\textit{Visual Explanations}\xspace}
\newcommand{\BE}{\textit{Beautiful Evidence}\xspace}

\newcommand{\TL}{Tufte-\LaTeX\xspace}

% Prints the month name (e.g., January) and the year (e.g., 2008)
\newcommand{\monthyear}{%
  \ifcase\month\or January\or February\or March\or April\or May\or June\or
  July\or August\or September\or October\or November\or
  December\fi\space\number\year
}


\newcommand{\urlwhitespacereplace}[1]{\StrSubstitute{#1}{ }{_}[\wpLink]}

\newcommand{\wikipedialink}[1]{http://en.wikipedia.org/wiki/#1}% needs \wpLink now

\newcommand{\anonymouswikipedialink}[1]{\urlwhitespacereplace{#1}\href{\wikipedialink{\wpLink}}{Wikipedia}}

\newcommand{\Wikiref}[1]{\urlwhitespacereplace{#1}\href{\wikipedialink{\wpLink}}{#1}}

% Prints an epigraph and speaker in sans serif, all-caps type.
\newcommand{\openepigraph}[2]{%
  %\sffamily\fontsize{14}{16}\selectfont
  \begin{fullwidth}
  \sffamily\large
  \begin{doublespace}
  \noindent\allcaps{#1}\\% epigraph
  \noindent\allcaps{#2}% author
  \end{doublespace}
  \end{fullwidth}
}

% Inserts a blank page
\newcommand{\blankpage}{\newpage\hbox{}\thispagestyle{empty}\newpage}

\usepackage{units}

% Typesets the font size, leading, and measure in the form of 10/12x26 pc.
\newcommand{\measure}[3]{#1/#2$\times$\unit[#3]{pc}}

% Macros for typesetting the documentation
\newcommand{\hlred}[1]{\textcolor{Maroon}{#1}}% prints in red
\newcommand{\hangleft}[1]{\makebox[0pt][r]{#1}}
\newcommand{\hairsp}{\hspace{1pt}}% hair space
\newcommand{\hquad}{\hskip0.5em\relax}% half quad space
\newcommand{\TODO}{\textcolor{red}{\bf TODO!}\xspace}
\newcommand{\na}{\quad--}% used in tables for N/A cells
\providecommand{\XeLaTeX}{X\lower.5ex\hbox{\kern-0.15em\reflectbox{E}}\kern-0.1em\LaTeX}
\newcommand{\tXeLaTeX}{\XeLaTeX\index{XeLaTeX@\protect\XeLaTeX}}
% \index{\texttt{\textbackslash xyz}@\hangleft{\texttt{\textbackslash}}\texttt{xyz}}
\newcommand{\tuftebs}{\symbol{'134}}% a backslash in tt type in OT1/T1
\newcommand{\doccmdnoindex}[2][]{\texttt{\tuftebs#2}}% command name -- adds backslash automatically (and doesn't add cmd to the index)
\newcommand{\doccmddef}[2][]{%
  \hlred{\texttt{\tuftebs#2}}\label{cmd:#2}%
  \ifthenelse{\isempty{#1}}%
    {% add the command to the index
      \index{#2 command@\protect\hangleft{\texttt{\tuftebs}}\texttt{#2}}% command name
    }%
    {% add the command and package to the index
      \index{#2 command@\protect\hangleft{\texttt{\tuftebs}}\texttt{#2} (\texttt{#1} package)}% command name
      \index{#1 package@\texttt{#1} package}\index{packages!#1@\texttt{#1}}% package name
    }%
}% command name -- adds backslash automatically
\newcommand{\doccmd}[2][]{%
  \texttt{\tuftebs#2}%
  \ifthenelse{\isempty{#1}}%
    {% add the command to the index
      \index{#2 command@\protect\hangleft{\texttt{\tuftebs}}\texttt{#2}}% command name
    }%
    {% add the command and package to the index
      \index{#2 command@\protect\hangleft{\texttt{\tuftebs}}\texttt{#2} (\texttt{#1} package)}% command name
      \index{#1 package@\texttt{#1} package}\index{packages!#1@\texttt{#1}}% package name
    }%
}% command name -- adds backslash automatically
\newcommand{\docopt}[1]{\ensuremath{\langle}\textrm{\textit{#1}}\ensuremath{\rangle}}% optional command argument
\newcommand{\docarg}[1]{\textrm{\textit{#1}}}% (required) command argument
\newenvironment{docspec}{\begin{quotation}\ttfamily\parskip0pt\parindent0pt\ignorespaces}{\end{quotation}}% command specification environment
\newcommand{\docenv}[1]{\texttt{#1}\index{#1 environment@\texttt{#1} environment}\index{environments!#1@\texttt{#1}}}% environment name
\newcommand{\docenvdef}[1]{\hlred{\texttt{#1}}\label{env:#1}\index{#1 environment@\texttt{#1} environment}\index{environments!#1@\texttt{#1}}}% environment name
\newcommand{\docpkg}[1]{\texttt{#1}\index{#1 package@\texttt{#1} package}\index{packages!#1@\texttt{#1}}}% package name
\newcommand{\doccls}[1]{\texttt{#1}}% document class name
\newcommand{\docclsopt}[1]{\texttt{#1}\index{#1 class option@\texttt{#1} class option}\index{class options!#1@\texttt{#1}}}% document class option name
\newcommand{\docclsoptdef}[1]{\hlred{\texttt{#1}}\label{clsopt:#1}\index{#1 class option@\texttt{#1} class option}\index{class options!#1@\texttt{#1}}}% document class option name defined
\newcommand{\docmsg}[2]{\bigskip\begin{fullwidth}\noindent\ttfamily#1\end{fullwidth}\medskip\par\noindent#2}
\newcommand{\docfilehook}[2]{\texttt{#1}\index{file hooks!#2}\index{#1@\texttt{#1}}}
\newcommand{\doccounter}[1]{\texttt{#1}\index{#1 counter@\texttt{#1} counter}}

\newcommand{\studyq}[1]{\marginnote{Q: #1}}

\hypersetup{colorlinks}% uncomment this line if you prefer colored hyperlinks (e.g., for onscreen viewing)

% Generates the index
\usepackage{makeidx}
\makeindex

\setcounter{tocdepth}{3}
\setcounter{secnumdepth}{3}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% custom commands

\newtheorem{theorem}{\color{pastel-blue}Theorem}[section]
\newtheorem{lemma}[theorem]{\color{pastel-blue}Lemma}
\newtheorem{proposition}[theorem]{\color{pastel-blue}Proposition}
\newtheorem{corollary}[theorem]{\color{pastel-blue}Corollary}

\newenvironment{proof}[1][Proof]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}]}{\end{trivlist}}
\newenvironment{definition}[1][Definition]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}]}{\end{trivlist}}
\newenvironment{example}[1][Example]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}]}{\end{trivlist}}
\newenvironment{remark}[1][Remark]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}]}{\end{trivlist}}

\hyphenpenalty=5000

% more pastel ones
\xdefinecolor{pastel-red}{rgb}{0.77,0.31,0.32}
\xdefinecolor{pastel-green}{rgb}{0.33,0.66,0.41}
\definecolor{pastel-blue}{rgb}{0.30,0.45,0.69} % crayola blue
\definecolor{gray}{rgb}{0.2,0.2,0.2} % dark gray

\xdefinecolor{orange}{rgb}{1,0.45,0}
\xdefinecolor{green}{rgb}{0,0.35,0}
\definecolor{blue}{rgb}{0.12,0.46,0.99} % crayola blue
\definecolor{gray}{rgb}{0.2,0.2,0.2} % dark gray

\xdefinecolor{cerulean}{rgb}{0.01,0.48,0.65}
\xdefinecolor{ust-blue}{rgb}{0,0.20,0.47}
\xdefinecolor{ust-mustard}{rgb}{0.67,0.52,0.13}

%\newcommand\comment[1]{{\color{red}#1}}

\newcommand{\dy}{\partial}
\newcommand{\ddy}[2]{\frac{\dy#1}{\dy#2}}

\newcommand{\ex}{\mathrm{e}}
\newcommand{\zi}{{\rm i}}

\newcommand\Real{\mbox{Re}} % cf plain TeX's \Re and Reynolds number
\newcommand\Imag{\mbox{Im}} % cf plain TeX's \Im

\newcommand\Def[1]{\textbf{#1}}

\newcommand{\qed}{\hfill$\blacksquare$}
\newcommand{\qedwhite}{\hfill \ensuremath{\Box}}

\newcommand{\highlight}[1]{\mathchoice%
  {\colorbox{black!10}{$\displaystyle#1$}}%
  {\colorbox{black!10}{$\textstyle#1$}}%
  {\colorbox{black!10}{$\scriptstyle#1$}}%
  {\colorbox{black!10}{$\scriptscriptstyle#1$}}}%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% some extra formatting (hacked from Patrick Farrell's notes)
%  https://courses.maths.ox.ac.uk/node/view_material/4915
%

% chapter format
\titleformat{\chapter}%
  {\huge\rmfamily\itshape\color{pastel-red}}% format applied to label+text
  {\llap{\colorbox{pastel-red}{\parbox{1.5cm}{\hfill\itshape\huge\color{white}\thechapter}}}}% label
  {1em}% horizontal separation between label and title body
  {}% before the title body
  []% after the title body

% section format
\titleformat{\section}%
  {\normalfont\Large\itshape\color{pastel-green}}% format applied to label+text
  {\llap{\colorbox{pastel-green}{\parbox{1.5cm}{\hfill\color{white}\thesection}}}}% label
  {1em}% horizontal separation between label and title body
  {}% before the title body
  []% after the title body

% subsection format
\titleformat{\subsection}%
  {\normalfont\large\itshape\color{pastel-blue}}% format applied to label+text
  {\llap{\colorbox{pastel-blue}{\parbox{1.5cm}{\hfill\color{white}\thesubsection}}}}% label
  {1em}% horizontal separation between label and title body
  {}% before the title body
  []% after the title body

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

% Front matter
%\frontmatter

% r.3 full title page
%\maketitle

% v.4 copyright page

\chapter*{}

\begin{fullwidth}

\par \begin{center}{\Huge Riemannian geometry 4H}\end{center}

\vspace*{5mm}

\par \begin{center}{\Large typed up by B. S. H. Mithrandir}\end{center}

\vspace*{5mm}

\begin{itemize}
  \item \textit{Last compiled: \monthyear}
  \item Adapted from notes of (I think?) W. Klingenberg, Durham
  \item This was part of the Riemannian Geometric 4H module elective, as a follow on to the Differential geometry 3H course. Probably would help having gone through the Analysis 3H course also.
  \item[]
  \item \TODO diagrams
\end{itemize}

\par

\par Licensed under the Apache License, Version 2.0 (the ``License''); you may not
use this file except in compliance with the License. You may obtain a copy
of the License at \url{http://www.apache.org/licenses/LICENSE-2.0}. Unless
required by applicable law or agreed to in writing, software distributed
under the License is distributed on an \smallcaps{``AS IS'' BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND}, either express or implied. See the
License for the specific language governing permissions and limitations
under the License.
\end{fullwidth}


%===============================================================================

\chapter{Differentiable manifolds}

Recall that a $k$-manifold $M$ is one which, locally, looked like open sets of $\mathbb{R}^k$. The manifold is build up by patching together these local sets.

\begin{example}
  \begin{enumerate}
    \item A surface of revoluation $M$ with $\gamma : [a, b] \to \mathbb {R}^3$ with $\gamma(t) = (\gamma_1(t), 0, \gamma_3(t))$ (assuming $\gamma'(t) \neq 0$ for all $t$ and $\gamma$ is simple) is given by
    \begin{align*}
      M &= \{ (\gamma_1(t), \gamma_3(t)\cos\theta, \gamma_3(t)\sin\theta)\ |\ t\in[a,b],\ \theta \in [0, 2\pi]\}\\
        &= \{ (x_1, x_2, x_3)\ |\ \exists t\in(a,b),\ x_1 = \gamma_1(t),\ x_2^2 + x_3^2 = \gamma_3^2(t)\}.
    \end{align*}
    
    \item The matrix group $\mbox{SL}(n, \mathbb{R})$, $\mbox{O}(n)$ and $\mbox{SO}(n)$ can be considered as submanifolds of the ambient space $\mathbb{R}^{n^2} = M(n, \mathbb{R}$.
    
    \item The real projective plane/space $\mathbb{R}\mbox{P}^n$ is given by the set of all lines through the origin in $\mathbb{R}^{n+1}$. It can be identified with the quotient group $S^n / \sim$, where $p \sim q$ iff $p = \pm q$.
  \end{enumerate}
\end{example}

Recall that for an $n$-dimensional subspace $X \subset \mathbb{R}^n$, $x \in X$ is called an \textbf{inner point} of iff there exists an $n$-dimensional open $U \subset X$ with $x\in U$. $X$ is \textbf{open} if every $x \in X$ is an inner point.

Let $M$ be a set. A collection $(U_\alpha, \phi_\alpha)$ with index $\alpha$ is called an \textbf{atlas} of $M$ is
\begin{enumerate}
  \item $U_\alpha \in M$ and $\bigcup_\alpha U_\alpha = M$ (the collection of $U_\alpha$ covers $M$),
  
  \item $\phi_\alpha : U_\alpha \to V_\alpha \subset \mathbb{R}^n$ are bijective maps with open $V_\alpha$, and for each $\alpha, \beta$, $\phi_\alpha(U_\alpha \cap U_\beta)$ is open,
  
  \item the co-ordinate changes $\phi_\beta \circ \phi_\alpha^{-1} : \phi_\alpha(U_\alpha \cap U_\beta) \to \phi_\beta(U_\alpha \cap U_\beta)$ are smooth maps between open subsets of $\mathbb{R}^n$.
\end{enumerate}

Let $(U_\alpha, \phi_\alpha)$ be an atlas of $M$, and $X \subset M$. A point $x \in X$ is called an \textbf{inner point} of $X$ is there exists $\phi_\alpha : U_\alpha \to V_\alpha \subset \mathbb{R}^n$ such that $\phi_\alpha(x)$ is an inner point of $\phi_\alpha (X \cap U_\alpha)$ for $x \in U_\alpha$. $X$ is \textbf{open} if every $x \in X$ is an inner point.

A set $M$ is a \textbf{differentiable manifold} if it carries an atlas $(U_\alpha, \phi_\alpha)$ and has the \textbf{Hausdorff property}, i.e. for any $p, q \in M$ with $p \neq q$, there exists open $A_p, A_q \subset M$ such that for $p \in A_p$ and $q \in A_q$ where $A_p \cap A_q = \emptyset$.\marginnote{This would be the $T_2$ condition relating to topological spaces. Distinct points have disjoint neighbourhoods.}

\begin{example}
  Consider the real line with zero removed, and we take $M = (\mathbb{R} \ \{0\}) \cup \{0_+, 0_-\}$ where $0_\pm$ are points off the real line by arbitrarily near zero. We can construct the smooth charts
  \begin{equation*}
    \phi_i : (\mathbb{R} \ \{0\}) \cup \{0_i\} \to \mathbb{R}, \qquad x \mapsto \begin{cases}x, & x \neq 0_i, \\ 0, & x=0_i,\end{cases}
  \end{equation*}
  and $\{\phi_+, \phi_-\}$ can serve as an atlas, but we do not have the Hausdorff property, and $M$ is not a differentiable manifold.
\end{example}

%-------------------------------------------------------------------------------

\section{Manifolds and regular values}

Let $f : U \to \mathbb{R}^k$ be differentiable and $U$ is open, and denote
\begin{equation}
  \highlight{Df(x) = \left[\frac{\partial f_i}{\partial x_j}\right]_{ij} : \mathbb{R}^n \to \mathbb{R}^k}
\end{equation}
be the Jacobian matrix at $x \in U$. The point $x \in U$ is a \textbf{regular point} if $Df(x)$ is surjective, i.e. of rank $k$. $y \in \mathbb{R}^k$ is a \textbf{regular value} of $f$ if all $x \in f^{-1}(y)$ are regular points.

\begin{theorem}
  Let $U \subset \mathbb{R}^n$ be open, $f : U \to \mathbb{R}^k$ be differentiable, $k \leq n$, and $y \in \mathbb{R}^k$ be a regular value of $f$. Then $M = f^{-1}(y) \subset U$ is a differentiable manifold of dimension $(n-k)$. \qedwhite
\end{theorem}

\begin{theorem}[Implicit function theorem]
  For differentiable $f : \mathbb{R}^{n-k} \times \mathbb{R}^k \to \mathbb{R}^k$, $f(x^1, x^2) = y$, then we have
  \begin{equation*}
    df(x^1, x^2) = \left[\frac{\partial f}{\partial x^1}(x^1, x^2) \quad \frac{\partial f}{\partial x^2}(x^1, x^2)\right].
  \end{equation*}
  Assuming $\mbox{det}\left[\partial f / \partial x^2(x^1, x^2)\right]$ is non-zero, then there exists neighbourhoods $V_1 \subset \mathbb{R}^{n-k}$ and $V_2 \subset \mathbb{R}^k$ (with $x^1 \in V_1$ and $x^2 \in V_2$) where there is some $\psi : V_1 \to V_2$ that is differentiable, and such that $f^{-1}(y) \cap (V_1 \times V_2) = \{(x^1, \psi(x^1)\ :\ x^1 \in V_1\}$. \qedwhite
\end{theorem}

Note that for differentiable $f : \mathbb{R}^n \to \mathbb{R}^k$, by the chain rule we have
\begin{equation}
  Df(x) \cdot z = \lim_{h \to 0} \frac{f(x + hz) - f(x)}{h}, \qquad z \in \mathbb{R}^n
\end{equation}
since $Df(x) : \mathbb{R}^n \to \mathbb{R}^k$ This can be regarded as a \textbf{directional derivative in the direction $z$}.

\begin{example}
  The group $\mbox{SO}(n)$ can be considered as a manifold. Consider $\mbox{GL}^+(n) = \{A \in \mbox{M}(n, \mathbb{R})\ |\ |A| > 0\}$, which is an open set in $\mbox{M}(n, \mathbb{R}) \cong \mathbb{R}^{n^2}$, as $\mbox{det} : \mbox{M}(n, \mathbb{R}) \to \mathbb{R}$ is a continuous function. Note that $AA^T = I$ means $|A| = \pm 1$, so
  \begin{equation*}
    \mbox{SO}(n) = \mbox{O}(n) \cap \mbox{GL}^+(n).
  \end{equation*}
  Consider $f : \mbox{GL}^+(n) \to \mbox{Sym}(n) = \{C \in \mbox{M}(n, \mathbb{R})\ |\ C^T = C\} \cong \mathbb{R}^{n(n+1)/2}$, with $f(A) = AA^T - I$. Then we clearly have $f^{-1}(0) = \mbox{SO}(n)$, and observe that
  \begin{align*}
    \left.Df\right|_A B 
      &= \lim_{h \to 0} \frac{f(A + hB) - f(A)}{h}\\
      &= \lim_{h \to 0} \left[ \frac{(A + hB)^T (A + hB) - A^T A}{h} \right]\\
      &= \lim_{h \to 0} \left[ A^T B + B^T A + t B^T B \right]\\
      &= A^T B + B^T A.
  \end{align*}
  We need to check if $Df$ is surjective for all $A \in f^{-1}(0) = \mbox{SO}(n)$. For $C \in \mbox{Sym}(n)$, we have
  \begin{align*}
    \left.Df\right|_A \left(\frac{1}{2}AC \right) = \frac{1}{2} A^T (AC) + \frac{1}{2}(AC)^T A = C
  \end{align*}
  since $AA^T = I$ and $C = C^T$. Since $C$ was arbitrary, $Df$ is surjective, thus $0$ is a regular value and $\mbox{SO}(n)$ is a $n^2 - n(n+1)/2 = n(n-1)/2$ dimensional manifold.
\end{example}

\begin{example}
  Let $M$ and $N$ be manifolds, then the claim is that $M\times N = \{(x,y)\ |\ x\in M,\ y\in N\}$ is a $(m+n)$-manifold. 
  
  Let $(U_\alpha, \phi_\alpha)$ be an atlas for $M$ and $(\tilde{U}_\beta, \tilde{\phi}_\beta)$ be an atlas for $N$. Then $(U_\alpha \times \tilde{U}_\beta, \psi_{\alpha\beta} = \phi_\alpha \times \tilde{\phi}_\beta)$ is an atlast for $M\times N$. The co-ordinates changes
  \begin{equation*}
    \left(\psi_{\alpha\beta}^{-1} \circ \psi_{\gamma\delta}\right)(u,v) = \left(\phi_\alpha^{-1}\circ \tilde{\phi}_\gamma (u), \phi_\beta^{-1}\circ \tilde{\phi}_\delta (v)\right)
  \end{equation*}
  are clearly differentiable. 
  
  To show the Hausdorff property, let $(x,y) \neq (z,w)$ on $M\times N$. Choosing appropriate open neighbourhoods $U_{x,z} \subset M$ and $\tilde{U}_{y,w} \subset N$, we note individually they do not intersect if $x\neq z$ and $y\neq w$, since $M$ and $N$ are manifolds. By construction, $U_x \times \tilde{U}_y \subset M\times N$ and $U_z \times \tilde{U}_w \subset M\times N$ are open neighbourhoods of $(x,y)$ and $(w,z)$, and they have empty intersections, so we have the Hausdorff property.
\end{example}

%-------------------------------------------------------------------------------

\section{Differentiable maps, tangent vectors, and differentials}

Let $M$ and $N$ be $m$- and $n$-manifolds. A function $f:M\to N$ is \textbf{differentiable at $x\in M$} if there are co-ordinate charts
\begin{equation*}
  \phi: U\to V\subset \mathbb{R}^m,\ x\in U\subset M, \qquad \tilde{\phi}: \tilde{U}\to \tilde{V}\subset \mathbb{R}^n,\ f(x)\in \tilde{U}\subset N,
\end{equation*}
such that
\begin{equation}
  \tilde{\phi}\circ f \circ \phi^{-1}: \phi\left( U\cap f^{-1}(\tilde{U})\right) \to \tilde{V}
\end{equation}
is differentiable at $\phi(x) \in V \subset \mathbb{R}^m$. The function $f$ is \textbf{differentiable} if it is differentiable for all $x \in M$. Note that the definition is independent of co-ordinate choice, since the co-ordinate changes are differentiable.

Differentiable maps $c:(a,b) \to M$ are called \textbf{curves}.

Let $M$ be a manifold and $x\in M$, and $D(M, x) = \{f: M\to \mathbb{R}\ |\ f\textnormal{ differentiable at } x \}$. Let $c:(a,b) \to M$ be a curve with $c(t_0) = x$. The \textbf{directional derivative} of $f\in D(M,x)$ along $c$ at $x = c(t_0)$ is denoted by
\begin{equation}
  \highlight{c'(t_0)(f) = \lim_{t\to 0} \frac{f\left(c(t_0+t)\right) - f(c(t_0))}{t} = \left.\frac{\mathrm{d}}{\mathrm{d}t}\right|_{t=t_0}(f\circ c)(t)}
\end{equation}

\begin{remark}
  $D(M,x)$ is an algebra over $\mathbb{R}$ (a vector space over $\mathbb{R}$ and $fg \in D(M, x)$ for $f,g \in D(M,x)$). The directional derivative along $c$ at $x=c(t_0)$ has the following properties:
  \begin{enumerate}
    \item $c'(t_0)(\lambda f + \mu g) = \lambda c'(t_0)(f) + \mu c'(t_0)g$ for $\lambda, \mu \in \mathbb{R}$,
    \item $c'(t_0)(fg) = g(x)c'(t_0)(f) + f(x)c'(t_0)(g)$.
  \end{enumerate}
  A map $D(M,x)\to \mathbb{R}$ with the above properties is called a \textbf{linear derivative} of the algebra $D(M,x)$.
\end{remark}

\begin{example}
  Note that different curves $c_{1,2}:\mathbb{R}\to M$ with $c_1(0) = c_2(0) = x$ can define the same directional derivative at $x$. For example, let $c_{1,2} :\mathbb{R} \to \mathbb{R}^2$ with $c_1(t) = (t,0)$ and $c_2(t) = (t, t^2)$. The directional derivatives of some $f$ at some point corresponding to $t=0$ are clearly the same, since $c_1'(0) = c_2'(0) = (1,0)$.
\end{example}

One can generally check that if $c_{1,2}(a,b) \to M$ and $c_1(t_0) = c_2(t_0) = x$ with $c_1'(t_0) = c_2'(t_0)$, then $c_{1,2}'$ as directional derivatives are linear derivations iff there is a co-ordinate chart $\phi:U\to V\subset{R}^n$, $x\in U\subset M$ such that $(\phi\circ c_1)'(t_0) = (\phi\circ c_2)'(t_0)$ as ordinary vectors in $\mathbb{R}^n$. This is again independent of co-ordinate choice.

Let $M$ be a manifold, $x\in M$. A \textbf{tangent vector} of $M$ at $x$ is the directional derivative $c'(t_0):D(M, x) \to \mathbb{R}$ of a curve $c:(a,b)\to M$ with $c(t_0) = x$. The set of all tangent vectors defines the \textbf{tangent space} $T_x(M)$ at $x\in M$.

Let $M$ be a manifold and $\phi : U \to V \subset \mathbb{R}^n$, $U \subset M$ be a co-ordinate chart. For $\phi(x_1, \ldots, x_n)$ where each $x_i$ is the co-ordinate component of $\phi$, and $c_i:(-\epsilon, \epsilon) \to U$, $t\mapsto \phi^{-1}\left(\phi(p) + te_i\right)$, clearly we have $c_i(0) = p$, and so we define the \textbf{co-ordinate tangent vectors} to be
\begin{equation}
  \highlight{\left.\frac{\partial}{\partial x_i}\right|_p = c_i'(0) \in T_p(M)},
\end{equation}
where
\begin{equation}
  \highlight{\left.\frac{\partial}{\partial x_i}\right|_p = \left.\frac{\partial}{\partial t}\right|_0 (f\circ c_i)(t) = \left.\frac{\partial}{\partial t}\right|_0 (f\circ \phi^{-1})(\phi(p) + te_i) = \frac{\partial(f\circ \phi^{-1})}{\partial x_i}\left(\phi(p)\right)}.
\end{equation}

\begin{proposition}
  Let $M$ be a $n$-manifold, then $T_p(M)$ carries the structure of a $n$-vector space.
\end{proposition}

\begin{proof}
  \begin{enumerate}
    \item We first aim to show that $\{\left.\partial / \partial x_i\right|_p\}$ associated with a co-ordinate chart forms a spanning set of $T_p(M)$. Let $c:(a,b) \to M$ be a curve with $c(t_0)=p$. We show that $c'(t_0):D(M,p) \to \mathbb{R}$ is a linear combination of $\{\left.\partial / \partial x_i\right|_p\}$. Note that we have
    \begin{equation*}
      c'(t_0)(f) = (f\circ c)'(t_0) = \left((f\circ \phi^{-1}) \circ (\phi \circ c)\right)'(t_0).
    \end{equation*}
    Here, $f\circ \phi^{-1} : \mathbb{R}^n \to \mathbb{R}$, while $\phi\circ c = (c_1, \ldots c_n) = (x_1 \circ c, \ldots x_n \circ c): \mathbb{R}^n \to \mathbb{R}$. By the chain rule,
    \begin{align*}
      c'(t_0)(f) &= \left\langle \nabla(f\circ \phi^{-1})[(\phi\circ c)(t_0)], (c_1'(t_0), \ldots c_n'(t_0)) \right\rangle\\
        &= \frac{\partial (f\circ \phi^{-1})}{\partial x_i}(\phi(p))\cdot c_i'(t_0)\\
        &= \left.\frac{\partial}{\partial x_i}\right|_p(f)\cdot c_i'(t_0),
    \end{align*}
    hence our tangent vector is a linear combination of $\{\left.\partial / \partial x_i\right|_p(f)\}$, and hence we have a spanning set.
    
    \item We aim to show that the space is closed. Let $c:(-\epsilon, \epsilon) \to M$, $c(t) = \phi^{-1}(\phi(p) + (\alpha_i e_i)t)$; note that $c(0) = p$. Let 
    \begin{equation*}
      (c_1(t), \ldots c_n(t)) = (\phi\circ c)(t) = \phi(p) + t(\alpha_1, \ldots \alpha_n),
    \end{equation*}
    then $c_i'(0) = \alpha_i$, and so we have
    \begin{equation*}
      c'(0)(f) = c_i'(0)\left.\frac{\partial}{\partial x_i}\right|_p(f) = \alpha_i \left.\frac{\partial}{\partial x_i}\right|_p(f),
    \end{equation*}
    so a linear combinations of the spanning set are still tangent vectors.
    
    \item We aim to show that $\{\left.\partial / \partial x_i\right|_p\}$ are linearly independent, and thus we have a basis. Suppose we have some
    \begin{equation*}
      \alpha_i\left.\frac{\partial}{\partial x_i}\right|_p = 0: D(M,p) \to \mathbb{R};\quad f\mapsto 0.
    \end{equation*}
    We aim to show that all $\alpha_i = 0$. Choose $\phi\in C^\infty(M)$ with $\psi \equiv 1$ near $p\in M$ and $\psi\equiv 0$ outside $U$. Let $f_i = \psi\cdot x_i : M\to \mathbb{R}$, and so
    \begin{equation*}
      f_i(q) = \begin{cases}x_i(q), & q\in U,\\ 0, & q\not\in U,\end{cases}
    \end{equation*}
    and $f_i \in D(M,q)$. But then
    \begin{equation*}
      \alpha_i\left.\frac{\partial}{\partial x_i}\right|_p(f_j) = \alpha_i \frac{(f_j \circ \phi^{-1})}{\partial x_i}(\phi(p)),
    \end{equation*}
    and $f_j \circ \phi^{-1}$ is the projection to the $j^{\tiny\textnormal{th}}$ co-ordinate near $\phi(p) \in  \mathbb{R}^n$, with $(a_1, \ldots a_n) \mapsto a_j$. So
    \begin{equation*}
      \alpha_i\left.\frac{\partial}{\partial x_i}\right|_p(f_j) = \alpha_i \delta_{ij} = \alpha_j = 0
    \end{equation*}
    for all $j$ by assumption, and we thus have linear independence and therefore a basis for the $n$-vector space. \qed
  \end{enumerate}
\end{proof}

If a manifold $M \subseteq \mathbb{R}^N$, then we can identify the abstract tangent vectors $c'(0) \in T_p(M)$, $c'(0) : D(M,p) \to \mathbb{R}$ with classical tangent vectors $\tau'(0) \in \mathbb{R}^N$ via
\begin{equation*}
  \tau'(0) = (c'(0)(y_1), \ldots c'(0)(y_N)),
\end{equation*}
with $y_i$ the restriction of the $i^{\tiny\textnormal{th}}$ co-ordinate function (i.e. $(a_1, \ldots a_n) \mapsto a_i$) to $M$.

\begin{lemma}
  Let $A: (-\epsilon, \epsilon) \to \mbox{GL}(n,\mathbb{R})$ be a curve. Then $\mbox{det}A : (-\epsilon, \epsilon) \to \mathbb{R}$, $t \mapsto \mbox{det}(A(t))$ is differentiable and
  \begin{equation*}
    \left(\mbox{det}A\right)'(t) = \left(\mbox{det}A(t)\right) \cdot \mbox{tr}\left(A^{-1}(t)A'(t)\right).
  \end{equation*}
\end{lemma}
\begin{proof}
  Let $A(t) = [a_1(t)|\ldots|a_n(t)]$, $a_i(t) = [a_{1i}(t), \ldots a_{ni}(t)]^T$. Then
  \begin{equation*}
    \mbox{det}A(t) = \sum_{\sigma\in S_n}\mbox{sgn}(\sigma) a_{\sigma(1),1}\ldots a_{\sigma(n)n},
  \end{equation*}
  so
  \begin{align*}
    \left(\mbox{det}A\right)'(t) &= \sum_{\sigma\in S_n}\mbox{sgn}(\sigma)\left(a'_{\sigma(1),1}\ldots a_{\sigma(n)n} + \ldots + a_{\sigma(1),1}\ldots a'_{\sigma(n)n}\right)\\
      &= \mbox{det}[a_1'(t)|\ldots|a_n(t)] + \ldots + \mbox{det}[a_1(t)|\ldots|a_n'(t)].
  \end{align*}
  Since $\mbox{det}A \neq 0$ by the fact that $A\in \mbox{GL}(n, \mathbb{R})$, $\{a_i(t)\}$ forms a basis of $\mathbb{R}^n$ and therefore there exists coefficients $\alpha_{ij}$ such that $a_j'(t) = \alpha_{ij}(t)a_i(t)$, or $A' = A\alpha$ where $\alpha = (\alpha_{ij})$. Then
  \begin{align*}
    \left(\mbox{det}A\right)'(t) &= \mbox{det}[\alpha_{11}a_1(t)|\ldots|a_n(t)] + \ldots + \mbox{det}[a_1(t)|\ldots|\alpha_{nn}a_n(t)]\\
      &= (\alpha_{11} + \ldots + \alpha_{nn}) \mbox{det}A\\
      &= \mbox{tr}\alpha \cdot \mbox{det}A(t)\\
      &= \mbox{tr}\left(A^{-1}(t)A'(t)\right) \cdot \mbox{det}A(t)
  \end{align*}
  since $\alpha = A^{-1}A'$. \qed
\end{proof}

\begin{example}
  We show that the tangent space of $\mbox{SL}(n,\mathbb{R}) \subset M(n, \mathbb{R}) \cong \mathbb{R}^{n^2}$ at the identity $I$ is a $(n^2-1)$-manifold. Let $A:(-\epsilon, \epsilon) \to \mathbb{SL}(n,\mathbb{R})$ be a curve with $A(0) = I$. Then from above lemma,
  \begin{equation*}
    (\mbox{det} A)'(0) = 0 = \mbox{det}A(0)\cdot \mbox{tr}\left(A^{-1}(0)A'(0)\right) = \mbox{tr}A'(0),
  \end{equation*}
  so the tangent space $T_I(\mbox{SL}(n,\mathbb{R}))$ is contained in the set of zero trace matrices of dimension $n^2-1$. But the tangent space is a manifold and also of dimension $n^2-1$, so the tangent space is\marginnote{This is the \textbf{Lie algebra} of $\mbox{SL}(n,\mathbb{R})$, denoted $\mathfrak{sl}(n,\mathbb{R})$.}
  \begin{equation*}
    \mathfrak{sl}(n,\mathbb{R}) \equiv T_I(\mbox{SL}(n,\mathbb{R})) = \{B \in M(n,\mathbb{R})\ |\ \mbox{tr}B = 0\}.
  \end{equation*}
\end{example}

A group $G$ that happens to have a smooth manifold structure is called a \textbf{Lie group}; the composition and inverse maps are differentiable.

Examples of Lie groups include the usual matrix groups such as
\begin{itemize}
  \item $\mbox{GL}(n, \mathbb{R})$ (with $\mbox{dim}=n^2$)
  \item $\mbox{SL}(n, \mathbb{R})$ (with $\mbox{dim}=n^2 - 1$)
  \item $\mbox{SO}(n, \mathbb{R})$ (with $\mbox{dim}=n(n-1)/2$)
  \item $\mbox{O}(n, \mathbb{R})$ (with $\mbox{dim}=n(n-1)/2$)
\end{itemize}

Let $M$ and $N$ be differentiable manifolds, and $f: M \to N$ be differentiable. For $p \in M$,
\begin{equation}
  \highlight{Df(p): T_p(M) \to T_{f(p)}(N), \quad c'(t) \mapsto (f\circ c)'(t)}
\end{equation}
is called the \textbf{differential} of $f$ at $p$, where $c$ is a curve with $c(t) = p$. 

\begin{proposition}
  Note that $v \in T_p(M) : D(M,p) \to \mathbb{R}$ is a linear derivation. Then we have
\begin{equation}
  \highlight{Df(p)(v): D(N,p) \to \mathbb{R}, \quad \left(Df(p)(v)\right)(g) = v(g\circ f)}.
\end{equation}
\end{proposition}
\begin{proof}
  Let $c:(-\epsilon, \epsilon) \to M$ be a curve with $c(0) = p$, $c'(0) = v\in T_p(M)$. Then
  \begin{align*}
    \left(Df(p)(c'(0))\right)(g) &= (f\circ c)'(0)(g)\\
      &= (g\circ (f \circ c))'(0)\\
      &= ((g\circ f) \circ c)'(0)\\
      &= c'(0) (g\circ f)\\
      &= v(g\circ f).
  \end{align*}
  \qed
\end{proof}

\begin{example}
  Suppose we have the unit 2-sphere $S^2 = \{(x,y,z)\ |\ x^2 + y^2 + z^2 = 1\}$ and the cylinder $Z = \{(x,y,z)\ |\ x^2 + y^2 = 1,\ -1<z<1\}$. Let
  \begin{equation*}
    f: Z \to S^2, \quad f(x,y,z) = \left(x\sqrt{1-z^2}x, y\sqrt{1-z^2}, z\right),
  \end{equation*}
  and suppose $p = (1, 0, z_0) \in Z$, $v_1 = (0, 1, 0)$, $v_2 = (0, 0, 1)$. Define two curves on the cylinder $Z$ to include $v_{1,2}$ via
  \begin{equation*}
    c_1(t) = (\cos t, \sin t, z_0), \qquad c_2(t) = (1, 0, z_0 + t),
  \end{equation*}
  and clearly $c_1(0) = c_2(0) = p$ and $c_{1,2}'(0) = v_{1,2}$. Then
  \begin{align*}
    Df(p)(v_1) &= (f\circ c_1)'(0) \\
      &= \left.\left(\cos t\sqrt{1-z_0^2}, \sin t \sqrt{1-z_0^2}, z_0\right)'\right|_{t=0}\\
      &= \left(0, \sqrt{1-z_0^2}, 0\right).
  \end{align*}
  Then $f(p) = (\sqrt{1-z_0^2}, 0, z_0)$ we can check that we have orthogonality $\langle f(p), Df(p)(v_1)\rangle = 0$, so $Df(p)(v_1) \in T_{f(p)}(S^2)$. Similarly, we have
  \begin{align*}
    Df(p)(v_2) &= (f\circ c_2)'(0) \\
      &= \left.\left(\sqrt{1-(z_0+t)^2}, \sin t \sqrt{1-(z_0+t)}, z_0\right)'\right|_{t=0}\\
      &= \left(-\frac{z_0}{\sqrt{1-z_0^2}}, 0, 1\right),
  \end{align*}
  and we have $\langle f(p), Df(p)(v_2)\rangle = 0$, so $Df(p)(v_2) \in T_{f(p)}(S^2)$ as well.
\end{example}

%-------------------------------------------------------------------------------

\section{Tangent bundles, vector fields and Lie brackets}

Let $M$ be a manifold. The tangent spaces $T_p(M)$ for points $p\in M$ are all pairwise disjoint (since their elements are maps on different spaces $D(M,p)$).\marginnote{That's why one needs to be careful since we can't arbitrary add things on different tangent spaces together, even if they are all `vectors'.} Their disjoint union is called the \textbf{tangent bundle} of $M$, denoted
\begin{equation}
  \highlight{\dot{\bigcup}_{p\in M} T_p(M) = T(M)}.
\end{equation}
There is a canonical \textbf{footpoint projection} $\pi: T(M) \to M$ with $\pi(v) = p$ if $p\in T_p(M)$.\marginnote{This is mapping the vector at the touching points of the tangent spaces with the manifold onto the manifold.}

\begin{proposition}
  $T(M)$ a $n$-manifold $M$ is a $2n$-manifold.
\end{proposition}

\begin{proof}
  \qed
\end{proof}

A \textbf{vector field} $X$ is a differentiable map $X: M \to T(M)$ such that $X(p) \in T_p(M)$. The space of vector fields on $M$ is denoted $\mathcal{X}(M)$, and carries the structure of an infinite dimensional real vector space.

%===============================================================================

\chapter{Riemannian manifolds}

%-------------------------------------------------------------------------------

\section{Integration on Riemannian manifolds}

%-------------------------------------------------------------------------------

\section{Riemannian manifolds as metric spaces}

%===============================================================================

\chapter{Levi-Civita connection and parallel transport}

%-------------------------------------------------------------------------------

\section{Christoffel symbols}

%-------------------------------------------------------------------------------

\section{Parallel transport}

%-------------------------------------------------------------------------------

\section{Geodesics}

%-------------------------------------------------------------------------------

\section{Geodesic flow}

%===============================================================================

\chapter{Curvature}

%-------------------------------------------------------------------------------

\section{Sectional curvature}

%-------------------------------------------------------------------------------

\section{Ricci and scalar curvature}

%-------------------------------------------------------------------------------

\section{Isometric immersions}

%-------------------------------------------------------------------------------

\section{The second fundamental form}

%-------------------------------------------------------------------------------

\section{Second variational formular for length}



%===============================================================================

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% r.5 contents
%\tableofcontents

%\listoffigures

%\listoftables

% r.7 dedication
%\cleardoublepage
%~\vfill
%\begin{doublespace}
%\noindent\fontsize{18}{22}\selectfont\itshape
%\nohyphenation
%Dedicated to those who appreciate \LaTeX{} 
%and the work of \mbox{Edward R.~Tufte} 
%and \mbox{Donald E.~Knuth}.
%\end{doublespace}
%\vfill

% r.9 introduction
% \cleardoublepage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% actual useful crap (normal chapters)
\mainmatter

%\part{Basics (?)}


%\backmatter

%\bibliography{refs}
\bibliographystyle{plainnat}

%\printindex

\end{document}

